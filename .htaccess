AuthType Basic
AuthName "Restricted Area"
AuthUserFile /etc/apache2/.htpasswd
Require valid-user

<IfModule mod_mime.c>
  AddEncoding br .br
  AddType application/javascript .js.br
  AddType application/wasm .wasm.br
  AddType application/octet-stream .data.br
</IfModule>

<IfModule mod_headers.c>
  <FilesMatch "\.js\.br$">
    Header set Content-Encoding br
    Header set Content-Type application/javascript
  </FilesMatch>

  <FilesMatch "\.wasm\.br$">
    Header set Content-Encoding br
    Header set Content-Type application/wasm
  </FilesMatch>

  <FilesMatch "\.data\.br$">
    Header set Content-Encoding br
    Header set Content-Type application/octet-stream
  </FilesMatch>

  # Required for SharedArrayBuffer (Unity multithreading)
  Header set Cross-Origin-Opener-Policy "same-origin"
  Header set Cross-Origin-Embedder-Policy "require-corp"
  Header set Cross-Origin-Resource-Policy "same-origin"

  Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
  Header set Pragma "no-cache"
  Header set Expires 0
</IfModule>

<FilesMatch "\.(js|wasm|data)\.br$">
  Header set Cache-Control "no-store, must-revalidate"
</FilesMatch>